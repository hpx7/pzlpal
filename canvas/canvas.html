<!DOCTYPE html>
<html>
<head>

</head>
<body>
    <canvas id="canvas"></canvas>

    <script src="all.min.js" width="739px" height="631px"></script>
    <script src="http://code.jquery.com/jquery-latest.min.js"
        type="text/javascript"></script>
    <script>
        var canvas = new fabric.Canvas('canvas');
        canvas.setBackgroundImage('screen.jpg', canvas.renderAll.bind(canvas), {
          originX: 'left',
          originY: 'top'
        });

        canvas.setHeight(631);
        canvas.setWidth(739);

        

   canvas.observe('mouse:down', function(e) { mousedown(e); });
  canvas.observe('mouse:up', function(e) { mouseup(e); });

var started = false;
var x = 0;
var y = 0;

$(document).keyup(function(e) {
  if (e.keyCode == 46 && canvas.getActiveObject() != null) {
    canvas.getActiveObject().remove();
  } else if (e.keyCode == 46 && canvas.getActiveGroup() != null) {
    canvas.getActiveGroup().forEachObject(function(a) {
      canvas.remove(a);
    });
    canvas.discardActiveGroup();
    canvas.renderAll();
  }
});


/* Mousedown */
function mousedown(e) {
  if (canvas.getActiveObject() == null) {
    x = e.e.clientX;
    y = e.e.clientY;
    started = true;
  }
}


/* Mouseup */
function mouseup(e) {
    if(started) {
        started = false;

    var top = Math.min(y, e.e.clientY);
    var left = Math.min(x, e.e.clientX);
    var width = Math.max(x, e.e.clientX) - Math.min(x, e.e.clientX);
    var height = Math.max(y, e.e.clientY) - Math.min(y, e.e.clientY);

    if (width > 15 && height > 15) {
      var rect = new fabric.Rect({
          top : top-7,
          left : left-7,
          width : width,
          height : height,
          hasRotatingPoint: false,

          fill : 'rgba(31,31,254,0.25)'
      });
      canvas.add(rect);
      canvas.renderAll();
      canvas.setActiveObject(rect);
    }
  }
 } 






































    </script>
</body>
</html>